<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bluesky Feeds Project - Adrián Barrera</title>
<style>
html, body {
    margin: 0;
    height: 100%;
    font-family: "Courier New", Courier, monospace;
    overflow: hidden;
    transition: background 0.5s, color 0.5s;
}
body.dark { background: #1e1e1e; color: #fff; }
body.light { background: #f5f5f5; color: #000; }

#container { position: relative; height: 100vh; width: 100%; overflow: hidden; }

.console {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 1000px;
    height: 90%;
    border-radius: 8px;
    opacity: 0;
    transition: opacity 0.5s, background-color 0.5s, color 0.5s, box-shadow 0.5s;
    z-index: 1;
    display: flex;
    flex-direction: column;
}

body.dark .console { 
    background-color: rgba(0,0,0,0.85); 
    color: #fff; 
    box-shadow: 0 0 40px #ffffff44; /* white glow instead of green */
}
body.light .console { 
    background-color: rgba(255,255,255,0.95); 
    color: #000; 
    box-shadow: 0 0 20px #00000033; 
}

.console.active { opacity: 1; }

.header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 30px;
    padding: 0 0.8rem;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    user-select: none;
}

/* Windows header */
.win-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 30px;
    padding: 0 0.8rem;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    user-select: none;
    font-weight: normal;
}
.win-header.dark { background: #2d2d30; color: #fff; }
.win-header.light { background: #e0e0e0; color: #000; }

.win-title { font-weight: bold; font-size: 0.9rem; }
.win-buttons { display: flex; gap: 0.2rem; }
.win-buttons button {
    border: none;
    background: transparent;
    color: inherit;
    font-size: 0.9rem;
    width: 28px;
    height: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 2px;
    transition: background 0.2s;
}
.win-buttons button:hover { background: rgba(255,255,255,0.15); }
body.light .win-buttons button:hover { background: rgba(0,0,0,0.1); }

/* Mac header */
.mac-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    height: 30px;
    padding: 0 0.8rem;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    user-select: none;
}
.mac-header.dark { background: #2d2d30; color: #fff; }
.mac-header.light { background: #e0e0e0; color: #000; }

.mac-header .dot { width: 12px; height: 12px; border-radius: 50%; }
.mac-header .dot.red { background-color: #ff5f56; }
.mac-header .dot.yellow { background-color: #ffbd2e; }
.mac-header .dot.green { background-color: #27c93f; }

/* Content */
.console-content { padding: 1.5rem; overflow-y: auto; }
h1, h2 { margin-bottom: 1rem; }
p, li { line-height: 1.6; margin: 0.5rem 0; }
a { text-decoration: underline; }
a:hover { text-decoration: none; }

img { max-width: 100%; border-radius: 6px; margin: 1rem 0; }

/* Dark/light toggle */
.switch { position: fixed; top: 10px; right: 10px; width: 60px; height: 34px; z-index: 10; }
.switch input { display: none; }
.slider {
    position: absolute; cursor: pointer; top:0; left:0; right:0; bottom:0;
    background-color: #ccc; transition: 0.4s; border-radius: 34px;
}
.slider:before {
    position: absolute; content:""; height:26px; width:26px; left:4px; bottom:4px; background-color:#fff;
    transition:0.4s; border-radius:50%;
}
input:checked + .slider { background-color: #999; }
input:checked + .slider:before { transform: translateX(26px); }
</style>
</head>
<body class="dark">

<label class="switch">
    <input type="checkbox" id="mode-toggle">
    <span class="slider"></span>
</label>

<div id="container">
  <div class="console active">
    <div class="header">
      <span class="title">Bluesky Custom Feeds</span>
    </div>
    <div class="console-content">
      <h1>Bluesky Custom Feeds</h1>
      <p>
        <strong>Bluesky Custom Feeds</strong> represent one of the key approaches to decentralization in the AT Protocol. 
        The idea was to create a marketplace of algorithms—an option missing from the current social media landscape. 
        Platforms usually offer either opaque, AI-driven algorithms that users can’t control, or purely chronological feeds that reject algorithms altogether. 
        In this context, enabling people to <em>choose or build their own algorithms</em> is not just exciting—it’s necessary for digital sovereignty.
      </p>
      <p>
        This project began as an experiment: exploring what makes an algorithm useful, how to define topics for feeds, and how to build regional feeds. 
        Later, the focus expanded into gathering data from these feeds and presenting simple analytics to better understand activity patterns and growth.
      </p>

      <h2>Project Focus</h2>
      <ul>
        <li><strong>Research:</strong> Learning how the AT Protocol defines repositories, records, and XRPC calls.</li>
        <li><strong>Implementation:</strong>
          <ul>
            <li>Built a Uruguay custom feed following <a href="https://luten.dev/bluesky-ttrpg-feed/">Eddy Luten’s post</a>.</li>
            <li>Migrated to <a href="https://bossett.io/setting-up-bossetts-bluesky-feed-generator/">Bossett’s framework</a>.</li>
            <li>Shifted firehose processing to <a href="https://docs.bsky.app/blog/jetstream">Jetstream</a>.</li>
          </ul>  
        </li>
        <li><strong>Optimization & Refactor:</strong> Improved caching, query performance, and endpoint stability while adding new feeds.</li>
        <li><strong>Analytics:</strong> Designed dashboards to visualize feed growth and user activity.</li>
      </ul>

      <h2>Architecture</h2>
      <p>
        The system is structured as a modular Node.js backend running in Docker, connected to a MongoDB database. 
        Each feed is powered by an <strong>algorithm module</strong> that retrieves and filters posts from Bluesky (via Jetstream), 
        then stores processed metadata in MongoDB. 
        This setup makes it possible to serve feeds efficiently while also generating analytics in real time.
      </p>

      <!-- SVG diagram -->
      <svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
        <!-- Background -->
        <rect width="100%" height="100%" fill="#fafafa"/>

        <!-- Column 1: Bluesky Services -->
        <rect x="50" y="50" width="200" height="180" fill="none" stroke="#333" stroke-width="2" rx="12"/>
        <text x="150" y="40" font-family="Arial" font-size="18" text-anchor="middle" fill="#333">Bluesky Services</text>
        <rect x="70" y="70" width="160" height="70" fill="#4fc3f7" stroke="#333" stroke-width="2" rx="12"/>
        <text x="150" y="105" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff">Bluesky API</text>
        <rect x="70" y="150" width="160" height="70" fill="#0288d1" stroke="#333" stroke-width="2" rx="12"/>
        <text x="150" y="185" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff">Jetstream</text>

        <!-- Column 2: Node.js Wrapper (Docker) -->
        <rect x="300" y="50" width="300" height="250" fill="none" stroke="#333" stroke-dasharray="6,4" stroke-width="2" rx="12"/>
        <text x="450" y="40" font-family="Arial" font-size="18" text-anchor="middle" fill="#333">Node.js Wrapper (Docker)</text>
        
        <rect x="320" y="70" width="260" height="100" fill="#6a1b9a" stroke="#333" stroke-width="2" rx="12"/>
        <text x="450" y="110" font-family="Arial" font-size="14" text-anchor="middle" fill="#fff">Feed Service</text>
        <text x="450" y="135" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">Algorithm Modules</text>

        <rect x="320" y="180" width="260" height="100" fill="#388e3c" stroke="#333" stroke-width="2" rx="12"/>
        <text x="450" y="220" font-family="Arial" font-size="14" text-anchor="middle" fill="#fff">Analytics Service</text>

        <!-- Analytics Dashboard -->
        <rect x="650" y="180" width="200" height="70" fill="#f0c84b" stroke="#333" stroke-width="2" rx="12"/>
        <text x="750" y="235" font-family="Arial" font-size="16" text-anchor="middle" fill="#333">Analytics Dashboard</text>

        <!-- MongoDB (smaller cylinder) -->
        <ellipse cx="450" cy="480" rx="70" ry="10" fill="#c84b4b" stroke="#333" stroke-width="2"/>
        <rect x="380" y="430" width="140" height="50" fill="#c84b4b" stroke="#333" stroke-width="2"/>
        <ellipse cx="450" cy="430" rx="70" ry="10" fill="#c84b4b" stroke="#333" stroke-width="2"/>
        <text x="450" y="455" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff">MongoDB</text>

        <!-- Arrowhead -->
        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
          </marker>
        </defs>

        <!-- Horizontal arrow from Bluesky Services to Node.js Wrapper -->
        <line x1="250" y1="135" x2="300" y2="135" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
        
        <!-- Horizontal arrow from Analytics Service to Analytics Dashboard -->
        <line x1="580" y1="220" x2="650" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

        <!-- Vertical arrow from Node.js Wrapper (middle bottom) to MongoDB -->
        <line x1="450" y1="300" x2="450" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
      </svg>

      <h2>Deployment Pipeline</h2>
      <p>
        Code and deployments follow a streamlined pipeline: source code lives in GitHub, automated builds and tests run via GitHub Actions, and deployments are delivered directly to a DigitalOcean App.
      </p>
      <!-- Deployment pipeline SVG -->
      <svg width="900" height="260" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="#f9f9f9"/>
        <rect x="50" y="90" width="180" height="80" fill="#24292e" stroke="#333" stroke-width="2" rx="12"/>
        <text x="140" y="135" font-family="Arial" font-size="18" text-anchor="middle" fill="#fff" font-weight="bold">GitHub</text>

        <rect x="300" y="90" width="220" height="80" fill="#2088ff" stroke="#333" stroke-width="2" rx="12"/>
        <text x="410" y="125" font-family="Arial" font-size="18" text-anchor="middle" fill="#fff" font-weight="bold">GitHub Actions</text>

        <rect x="600" y="90" width="220" height="80" fill="#0069ff" stroke="#333" stroke-width="2" rx="12"/>
        <text x="710" y="125" font-family="Arial" font-size="18" text-anchor="middle" fill="#fff" font-weight="bold">DigitalOcean App</text>

        <line x1="230" y1="130" x2="300" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
        <line x1="520" y1="130" x2="600" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

        <text x="265" y="115" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">Push</text>
        <text x="560" y="115" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">Deploy</text>

        <defs>
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
          </marker>
        </defs>
      </svg>

      <h2>Data Dashboards</h2>
      <p>
        To better understand how feeds were performing, I built dashboards showing:
      </p>
      <ul>
        <li><strong>Feed analytics:</strong> Post counts, unique authors, posting frequency, and growth trends.</li>
        <li><strong>User insights:</strong> Activity patterns, engagement rates, and top contributors.</li>
      </ul>
      <img src="../img/bluesky-dashboard.png" alt="Bluesky Feeds Dashboard Example" />

      <h2>Takeaways</h2>
      <p>
        This project highlighted how decentralized protocols like AT Protocol open new ways to interact with social data—filtering, managing, and experimenting with it. 
        Along the way, I deepened my understanding of AT Protocol, TypeScript, MongoDB, and DigitalOcean deployments.
      </p>
      <p>
        With today’s social platforms caught between black-box AI-driven algorithms and the rejection of algorithms altogether, 
        this project was a valuable exercise in designing <em>transparent, user-driven filtering</em> of large-scale social data streams.
      </p>
    </div>
  </div>
</div>

<script>
// Dark/light toggle
const toggle = document.getElementById('mode-toggle');
toggle.addEventListener('change', ()=>{
    if(toggle.checked){
        document.body.classList.remove('dark'); document.body.classList.add('light');
        document.querySelectorAll('.header').forEach(h=>h.classList.replace('dark','light'));
    } else {
        document.body.classList.remove('light'); document.body.classList.add('dark');
        document.querySelectorAll('.header').forEach(h=>h.classList.replace('light','dark'));
    }
});

// OS detection for console header
const isMac = /Mac|iPhone|iPad|iPod/i.test(navigator.userAgent);
document.querySelectorAll('.console').forEach(c=>{
    const h = c.querySelector('.header');
    if(isMac){
        h.className='mac-header dark';
        h.innerHTML = '<div class="dot red"></div><div class="dot yellow"></div><div class="dot green"></div><span class="title">'+h.querySelector('.title').textContent+'</span>';
    } else {
        h.className='win-header dark';
        h.innerHTML = '<span class="win-title">'+h.querySelector('.title').textContent+'</span><div class="win-buttons"><button title="Minimize">_</button><button title="Maximize">☐</button><button title="Close">X</button></div>';
    }
});

// Show console
document.querySelectorAll('.console').forEach(c=>c.classList.add('active'));
</script>

</body>
</html>
